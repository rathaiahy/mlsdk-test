<!DOCTYPE html>
<html>
  <head>
    <script
      type="text/javascript"
      src="/scripts/magicbook-client/index.iife.js"
    ></script>
  </head>
  <script type="text/javascript">
    const client = new MagicLabs.MagicBookClient(
      "862d2288-8dcb-451a-80c4-7cc66795d24e",
      "https://api.dev-sls.magicbook.io",
      "wss://socket.dev-sls.magicbook.io"
    );
    //console.log(client);

    window.dgr = makeBookRequest(client);

    async function makeBookRequest(client) {
      const designRequest = await client.createDesignRequest({
        occasion: "default",
        style: "519bf5f2b6734103a9a359469be4961b",
        bookSize: "5x7",
        coverType: "hc",
        pageType: "sp",
        userId: "user-id-abcdefgh",
        sku: "CommerceProduct_124538",
        imageDensity: "high",
        embellishmentLevel: "few",
        textStickerLevel: "none",
      });

      console.log(designRequest);

      var pictures = [
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/_khLZ2z9bepY2nPkccFHuw/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/SMc7-tBZQlWOr3BIWSpYdA/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 4000,
            "height": 3000,
            "rotation": 0,
            "captureTime": "2024-04-08T00:20:40.000Z",
            "filename": "20240407_172040.jpg",
            "handle": "SNAPFISH/_khLZ2z9bepY2nPkccFHuw/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/TUXkjFUMAG8Qi2EqftcR-g/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/ZkypWUc4syl9lDx1Wz9yHQ/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 3677,
            "height": 2880,
            "rotation": 0,
            "captureTime": "2024-01-21T19:55:41.000Z",
            "filename": "Kaarthika_Coloring.jpg",
            "handle": "SNAPFISH/TUXkjFUMAG8Qi2EqftcR-g/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/Ph0ETQkLmhm7vbLwN_a5dg/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/4CcviweU099-ykjTlvcLEg/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 3604,
            "height": 2886,
            "rotation": 0,
            "captureTime": "2024-01-21T19:55:32.000Z",
            "filename": "Jaagruthi_coloring.jpg",
            "handle": "SNAPFISH/Ph0ETQkLmhm7vbLwN_a5dg/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/pofJFVN-i8KU8GemBwlreg/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/xXxLa2DUPWUfh8xbtfdjyg/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 3000,
            "height": 4000,
            "rotation": 0,
            "captureTime": "2024-04-10T04:06:58.000Z",
            "filename": "20240409_210657.jpg",
            "handle": "SNAPFISH/pofJFVN-i8KU8GemBwlreg/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/spKo8E6Tr1cC_sYcDmlC0A/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/eqq9ATJuS32HNAlw0Tn5Gg/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 3000,
            "height": 4000,
            "rotation": 0,
            "captureTime": "2024-04-10T04:07:06.000Z",
            "filename": "20240409_210706.jpg",
            "handle": "SNAPFISH/spKo8E6Tr1cC_sYcDmlC0A/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/aRSfcaoPL9E5vmF74cl0QA/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/zWfDuvoGU5I4lHTp_ayjhQ/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 3000,
            "height": 4000,
            "rotation": 0,
            "captureTime": "2024-04-10T04:13:04.000Z",
            "filename": "20240409_211303.jpg",
            "handle": "SNAPFISH/aRSfcaoPL9E5vmF74cl0QA/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/DZgr6Br2ufE0lX83p5wvrA/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/tr2WgFMHQTqUF26r543nMQ/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 2208,
            "height": 2944,
            "rotation": 0,
            "captureTime": "2024-04-12T21:46:14.000Z",
            "filename": "20240412_144614.jpg",
            "handle": "SNAPFISH/DZgr6Br2ufE0lX83p5wvrA/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/jeHCs1LuPsk4jM9A8M5gHQ/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/mWByYjyOvCeyctl6gPnu2g/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 2208,
            "height": 2944,
            "rotation": 0,
            "captureTime": "2024-05-24T14:00:14.000Z",
            "filename": "20240524_070014.jpg",
            "handle": "SNAPFISH/jeHCs1LuPsk4jM9A8M5gHQ/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/sZ1nUPKTl0PeJMUSmUeAEA/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/Ozm5r390QZNnyfQwq2Q_ow/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 3000,
            "height": 4000,
            "rotation": 0,
            "captureTime": "2024-05-24T18:24:06.000Z",
            "filename": "20240524_112405.jpg",
            "handle": "SNAPFISH/sZ1nUPKTl0PeJMUSmUeAEA/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/nbtT3F188u0WTzvkg7ARdQ/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/d11EIykCq3CFUJL8wpNV4w/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 3000,
            "height": 4000,
            "rotation": 0,
            "captureTime": "2024-05-24T18:24:10.000Z",
            "filename": "20240524_112409.jpg",
            "handle": "SNAPFISH/nbtT3F188u0WTzvkg7ARdQ/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/XuIIj2vSdNxDYBJYmsgqSg/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/4S3e-XZ_lKOKV5dj81qJ7A/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 3000,
            "height": 4000,
            "rotation": 0,
            "captureTime": "2024-05-27T04:07:09.000Z",
            "filename": "20240526_210709.jpg",
            "handle": "SNAPFISH/XuIIj2vSdNxDYBJYmsgqSg/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/4Bb_GAXNTpZ9bY5e9JB04Q/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/LXjXVkPSHkW6uw_m9g6scA/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 3000,
            "height": 4000,
            "rotation": 0,
            "captureTime": "2024-05-29T17:34:20.000Z",
            "filename": "20240529_103420.jpg",
            "handle": "SNAPFISH/4Bb_GAXNTpZ9bY5e9JB04Q/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/n2iyHUctAwB9qhPEy0Ie9g/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/JkYrbB5y318G0p7FSzSmMg/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 3000,
            "height": 4000,
            "rotation": 0,
            "captureTime": "2024-05-31T19:36:21.000Z",
            "filename": "20240531_123620.jpg",
            "handle": "SNAPFISH/n2iyHUctAwB9qhPEy0Ie9g/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/iP4Hv46Tup4m-DoOVq5Ajg/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/56AAreGtZwfApMUXySIASA/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 3000,
            "height": 4000,
            "rotation": 0,
            "captureTime": "2024-06-16T21:43:54.000Z",
            "filename": "20240616_144353.jpg",
            "handle": "SNAPFISH/iP4Hv46Tup4m-DoOVq5Ajg/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/F1CmkguuVVdf5emjw_D6gg/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/hAqlJt3mbhJVxzj-2s5aqg/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 3000,
            "height": 4000,
            "rotation": 0,
            "captureTime": "2024-06-16T21:43:56.000Z",
            "filename": "20240616_144356.jpg",
            "handle": "SNAPFISH/F1CmkguuVVdf5emjw_D6gg/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/UDVN_2saba-Jg5hNojScdA/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/-p7T89a5-R-Lqois5cNoxw/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 4000,
            "height": 3000,
            "rotation": 0,
            "captureTime": "2024-06-26T16:14:24.000Z",
            "filename": "20240626_091424.jpg",
            "handle": "SNAPFISH/UDVN_2saba-Jg5hNojScdA/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/nnmXdXq9m6hz_4JTEEgAEw/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/h3BKtZ-mfjKKiXKHe9Wuug/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 4000,
            "height": 3000,
            "rotation": 0,
            "captureTime": "2024-06-26T16:14:33.000Z",
            "filename": "20240626_091433.jpg",
            "handle": "SNAPFISH/nnmXdXq9m6hz_4JTEEgAEw/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/LfMB0PdTqCXk1Q-gDPEPeQ/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/MJm6kRh2Bbj21-nCUsvoNg/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 3000,
            "height": 4000,
            "rotation": 0,
            "captureTime": "2024-06-26T16:14:37.000Z",
            "filename": "20240626_091437.jpg",
            "handle": "SNAPFISH/LfMB0PdTqCXk1Q-gDPEPeQ/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/YGl6Bca1Vbytl4BaRa4YLA/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/ZtQdV--efI3wBV--KTs8wg/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 3000,
            "height": 4000,
            "rotation": 0,
            "captureTime": "2024-06-29T03:10:02.000Z",
            "filename": "20240628_201001.jpg",
            "handle": "SNAPFISH/YGl6Bca1Vbytl4BaRa4YLA/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/FvYi1KdWmcHXse8AgtYkrw/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/gSO-GtGxDMSDfREg9FM45Q/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 3000,
            "height": 4000,
            "rotation": 0,
            "captureTime": "2024-06-29T03:10:04.000Z",
            "filename": "20240628_201003.jpg",
            "handle": "SNAPFISH/FvYi1KdWmcHXse8AgtYkrw/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/lcdammNCrJn7dh0CljyTGg/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/VuuH1zVZb1Zi_gly2UaBVQ/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 4000,
            "height": 3000,
            "rotation": 0,
            "captureTime": "2024-07-02T23:06:40.000Z",
            "filename": "20240702_160639.jpg",
            "handle": "SNAPFISH/lcdammNCrJn7dh0CljyTGg/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/yyPO5IVmQYw64_fVgiKJPw/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/VF53XYGsHe5vQYi-OVu1jQ/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 3000,
            "height": 4000,
            "rotation": 0,
            "captureTime": "2024-07-05T19:12:19.000Z",
            "filename": "20240705_121218.jpg",
            "handle": "SNAPFISH/yyPO5IVmQYw64_fVgiKJPw/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/TH6Zw8YeAkrZTPnFvV1FPg/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/BdJKqr8EE65_AX_4CycThw/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 3000,
            "height": 4000,
            "rotation": 0,
            "captureTime": "2024-07-05T19:41:13.000Z",
            "filename": "20240705_124113.jpg",
            "handle": "SNAPFISH/TH6Zw8YeAkrZTPnFvV1FPg/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/Hhqi_vH4KEFVTDexIqHJew/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/TMr-0V9SwDlzq4CjuAg8tw/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 3000,
            "height": 4000,
            "rotation": 0,
            "captureTime": "2024-07-19T20:53:54.000Z",
            "filename": "20240719_135354.jpg",
            "handle": "SNAPFISH/Hhqi_vH4KEFVTDexIqHJew/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        },
        {
            "url": "https://tnl.sf-stg.com/assetrenderer/v2/thumbnail/SNAPFISH/lsRLhO9UKZxCUO_vJ48zwA/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg/time/TU3U1b_cbqiO8DZEyCUfJw/h/as3/m/as3/l/as3/t/jp?height=800",
            "width": 3000,
            "height": 4000,
            "rotation": 0,
            "captureTime": "2024-07-21T18:38:29.000Z",
            "filename": "20240721_113829.jpg",
            "handle": "SNAPFISH/lsRLhO9UKZxCUO_vJ48zwA/a/xT3_6rRJmMopBqsliGBL2Q/d/qhac9fJtVzxe-Z2ExgA-lg",
            "metadata": {
                "jouranlCore": ""
            }
        }
      ];
      await Promise.all(
        pictures.map(async (image) => {
          await designRequest.images.add(image);
        })
      );

      /* designRequest.getOptions(50).then(function(data){
    			console.log('reponse', data);
    		}); */

      window.addEventListener(
        "MagicBook.designRequestUpdated",
        async (designRequestEvent) => {
          console.log(designRequestEvent.detail);
          if (designRequestEvent.detail.state === "ready") {
            console.log("Design request completed");
            console.log(await designRequest.getJSON("snapfish"));
          }
        }
      );

      await designRequest.submit({
        imageDensity: "high",
        imageFilteringLevel: "best",
        embellishmentLevel: "few",
        textStickerLevel: "none",
      });
    }

  </script>
  <div id="container"></div>
</html>
